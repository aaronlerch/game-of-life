#!/usr/bin/env ruby

require_relative 'stats'
require_relative 'cell'
require_relative 'world'
require_relative 'game'
require_relative 'renderer/console'
require_relative 'renderer/window'

# Rules:
# - live cell with 2-3 neighbors survives
# - dead cell with 3 neighbors becomes alive
# - all other cells die or stay dead

INITIAL_FILL_CELL_COUNT=600
CYCLES = 100
STEP_SPEED=0.1

#WINDOW_BOUNDS_X=50
#WINDOW_BOUNDS_Y=20
WINDOW_BOUNDS_X=128
WINDOW_BOUNDS_Y=96

world = World.new
stats = Stats.new
game = Game.new(world, stats)
game.populate INITIAL_FILL_CELL_COUNT, WINDOW_BOUNDS_X, WINDOW_BOUNDS_Y

#renderer = Renderer::Console.new({
renderer = Renderer::Window.new(game, {
  x_bounds: WINDOW_BOUNDS_X,
  y_bounds: WINDOW_BOUNDS_Y
})

renderer.show

puts "\n\n=== STATS ==="
stats.calculate
puts stats
puts ""